# My-MPRPC

## mini_zookeeper
包含以下内容：
Registry:注册中心
Provider:服务提供者
Consumer:服务消费者

```
zookeeper注册中心，应包含以下内容：
 1. 注册服务 register(service_name, service_address)
 2. 发现服务 find(service_name)
 3. 移除服务 remove(service_name, service_address)
 4. 心跳机制 服务提供者定期向注册中心发送心跳，证明自己还活着
 
 服务注册、发现、移除:可以用map<name, vector<service>> 来保存服务实例
 心跳机制:服务提供者通过网络定时向注册中心发送一个数据包，注册中心更新服务实例的时间信息。注册中心还要定期检查服务提供者有没有超时，将超时的服务移除。
 服务提供者向注册中心发送的心跳包，要包含哪些信息？   --- 提供的服务名称、自己的地址。
 注册中心收到心跳包，怎么处理？跟踪哪些状态？        --- 通过服务名称和地址，找到已注册的实例，更新它的时间信息
 注册中心如何判断一个服务提供者是否超时？           --- 注册中心要定时轮询，检查服务实例的发送时间，是否已经超时
 服务提供者确认下线了，如何处理？                  --- 从vector中移除
 
 如何实现定时检查？ --- 1. 另起一个独立线程，负责检查实例是否超时，让这个线程循环休眠、检查。 2. epoll_wait + 定时器。
```
